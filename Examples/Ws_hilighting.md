It adds a paragraph background and text colour to each line
then each sub trigger colours the gender text and changes the paragraph background to match.
Finally it alters idle or sleeping character's backgrounds to grey or black.
The effect is that only 'awake' characters will have colours.
This could be modified to merely display un-idle characters as highlighted with a brighter background to idle/sleeping characters
It could also be used to split WS output to onr or more spawn tabs - one for awake, one for idle or sleeping characters